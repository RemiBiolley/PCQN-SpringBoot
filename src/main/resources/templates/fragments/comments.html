<div th:fragment="comments">
    <div class = "comments">
        <input type="text" id="myComment">
        <input type="button" value="Publier" onclick="addComment();">
        <input type="hidden" th:value="${comments.size()}" name="commentsNumb">
        <th:block th:each="comment : ${comments}">
            <th:block th:if="${commentStat.count <= 4}" th:with="disp = 'block'">
                <div class="commentBlock" th:style="'display:'+${disp}+';'">
                    <input name="commentId" th:value="${comment.id}" class="invisible">
                    <div class="commentWriter" th:text="${comment.user.userName}"></div>
                    <div class="commentContent" th:text="${comment.content}"></div>
                    <div class="commentDate" th:text="${comment.date}"></div>
                    <th:block th:if="${comment.getChildrenComment().size() != 0}">
                        <input type="button" value="Afficher les réponses" name="showHideResponses">
                    </th:block>
                    <div class="invisible">
                        <div class="responseBlock" th:each="response : ${comment.getChildrenComment()}">
                            <div class="responseWriter" th:text="${response.user.userName}"></div>
                            <div class="responseContent" th:text="${response.content}"></div>
                            <div class="responseDate" th:text="${response.date}"></div>
                        </div>
                    </div>
                    <input type="button" value="Répondre" name="displayResponse">
                    <div class="responseBlockWrite">
                        Ecrivez votre réponse ci-dessous :
                        <input type="text">
                        <input type="button" value="Publier" name="addResponse">
                    </div>
                </div>
            </th:block>


            <!-- TREEEEEEEEEES MOCHE -->


            <th:block th:unless="${commentStat.count <= 4}" th:with="disp = 'none'">
                <div class="commentBlock" th:style="'display:'+${disp}+';'">
                    <input name="commentId" th:value="${comment.id}" class="invisible">
                    <div class="commentWriter" th:text="${comment.user.userName}"></div>
                    <div class="commentContent" th:text="${comment.content}"></div>
                    <div class="commentDate" th:text="${comment.date}"></div>
                    <th:block th:if="${comment.getChildrenComment().size() != 0}">
                        <input type="button" value="Afficher les réponses" name="showHideResponses">
                    </th:block>
                    <div class="invisible">
                        <div class="responseBlock" th:each="response : ${comment.getChildrenComment()}">
                            <div class="responseWriter" th:text="${response.user.userName}"></div>
                            <div class="responseContent" th:text="${response.content}"></div>
                            <div class="responseDate" th:text="${response.date}"></div>
                        </div>
                    </div>
                    <input type="button" value="Répondre" name="displayResponse">
                    <div class="responseBlockWrite">
                        Ecrivez votre réponse ci-dessous :
                        <input type="text">
                        <input type="button" value="Publier" name="addResponse">
                    </div>
                </div>
            </th:block>
        </th:block>
        <input type="button" class="showHideComments" name="6" value="Afficher plus de commentaires">
    </div>
</div>